##
 # reset.mcfunction
 # henri_the_datapack
 #
 # Created by MelonOnMain.
##
# Set version
scoreboard objectives add CurrentHenriVersion dummy
scoreboard players set Installed.big CurrentHenriVersion 6
scoreboard players set Installed.dot CurrentHenriVersion 0
scoreboard players set Installed.small CurrentHenriVersion 0

# On first run init. settings.
    # First set them to config v1's standards
        execute unless data storage minecraft:henridatapack settingsinit run data modify storage henridatapack enablespawning set value 0
        execute unless data storage minecraft:henridatapack settingsinit run data modify storage henridatapack autospawn set value 1
        execute unless data storage minecraft:henridatapack settingsinit run data modify storage henridatapack MultipleHenris set value 0
        execute unless data storage minecraft:henridatapack settingsinit run data modify storage henridatapack henricheatenabled set value 0
        execute unless data storage minecraft:henridatapack settingsinit run data modify storage henridatapack henrysanimals set value 1
        data modify storage henridatapack settingsinit set value 1
    # Now set for config v2
        execute unless data storage minecraft:henridatapack settingsinit run data modify storage henridatapack bertthebanker set value 1
        execute unless data storage minecraft:henridatapack settingsinit run data modify storage henridatapack enableactive set value 1
        data modify storage henridatapack settingsinit set value 2
    # Now set for config v3
        data modify storage henridatapack multipleberts set value 0
        data modify storage henridatapack bertthebanker set value 1
        data modify storage henridatapack bertravels set value 1
        data modify storage henridatapack settingsinit set value 3
    # Now set for config v4
        data modify storage henridatapack summonbert set value 1
        data modify storage henridatapack settingsinit set value 4
    # Now set for config v5
        data modify storage henridatapack angerexplosions set value 0
        data modify storage henridatapack settingsinit set value 5


# Set triggers
scoreboard objectives add DoTheHenriCheat trigger
scoreboard objectives add SummonTheScaryGuy trigger
scoreboard objectives add HenriVersion trigger

# Load necessary parts
execute unless data storage minecraft:henridatapack {autospawn:0} run execute if data storage minecraft:henridatapack {MultipleHenris:0} run tp @e[type=villager,tag=Henri] ~ ~100 ~
execute unless data storage minecraft:henridatapack {autospawn:0} run execute if data storage minecraft:henridatapack {MultipleHenris:0} run kill @e[type=villager,tag=Henri]
execute unless data storage minecraft:henridatapack {autospawn:0} run summon villager ~ ~1 ~ {Tags:[Henri],VillagerData:{profession:"nitwit",level:99,type:"swamp"},Invulnerable:1,Silent:1,CustomName:'"Henri the medicin man"',ActiveEffects:[{Id:2,Amplifier:4,Duration:240},{Id:6,Amplifier:1,Duration:240},{Id:8,Amplifier:1,Duration:240},{Id:10,Amplifier:1,Duration:240},{Id:11,Amplifier:1,Duration:240},{Id:15,Amplifier:1,Duration:240},{Id:21,Amplifier:1,Duration:240},{Id:22,Amplifier:1,Duration:240},{Id:24,Amplifier:1,Duration:240},{Id:26,Amplifier:1,Duration:240},{Id:29,Amplifier:1,Duration:240},{Id:30,Amplifier:1,Duration:240},{Id:31,Amplifier:1,Duration:240}],Offers:{Recipes:[{buy:{id:"honey_bottle",Count:10},buyB:{id:"sugar",Count:3},sell:{id:"splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:1,Amplifier:126,Duration:1200},{Id:4,Amplifier:126,Duration:1200},{Id:17,Amplifier:126,Duration:200},{Id:7,Amplifier:2},{Id:8,Amplifier:126,Duration:1200},{Id:9,Amplifier:31,Duration:240},{Id:16,Duration:1200},{Id:27,Amplifier:126,Duration:1200},{Id:24,Amplifier:126,Duration:1200},{Id:17},{Id:25,Amplifier:20,Duration:1200},{Id:19,Amplifier:126,Duration:1200},{Id:28,Duration:4000}],CustomPotionColor:5020550,display:{Name:'[{"text":"Sweet stuff...dope","italic": true}]'}}},rewardExp:0b,maxUses:9999999}, {buy:{id:"honey_bottle",Count:10},buyB:{id:"magma_cream",Count:3},sell:{id:"splash_potion",Count:1,tag:{Potion:"minecraft:water",display:{Name:'[{"text":"Henri-made nurturing stimulant","italic": true}]'},CustomPotionEffects:[{Id:1,Amplifier:40,Duration:2147483647},{Id:3,Amplifier:126,Duration:2147483647},{Id:5,Amplifier:126,Duration:2147483647},{Id:6,Amplifier:8},{Id:8,Amplifier:10,Duration:2147483647},{Id:10,Amplifier:31,Duration:2147483647},{Id:11,Amplifier:4,Duration:2147483647},{Id:12,Duration:2147483647},{Id:13,Duration:2147483647},{Id:16,Duration:2147483647},{Id:21,Amplifier:126,Duration:2147483647},{Id:22,Amplifier:126,Duration:2147483647},{Id:23,Amplifier:126},{Id:26,Amplifier:126,Duration:2147483647},{Id:30,Duration:2147483647},{Id:29,Duration:2147483647},{Id:30,Duration:2147483647}]}},rewardExp:0b,maxUses:9999999}, {buy:{id:"honey_bottle",Count:20},buyB:{id:"sugar",Count:6},sell:{id:"lingering_potion",Count:1,tag:{CustomPotionEffects:[{Id:1,Amplifier:126,Duration:1200},{Id:4,Amplifier:126,Duration:1200},{Id:17,Amplifier:126,Duration:200},{Id:7,Amplifier:2},{Id:8,Amplifier:126,Duration:1200},{Id:9,Amplifier:31,Duration:240},{Id:16,Duration:1200},{Id:27,Amplifier:126,Duration:1200},{Id:24,Amplifier:126,Duration:1200},{Id:17},{Id:25,Amplifier:20,Duration:1200},{Id:19,Amplifier:126,Duration:1200},{Id:28,Duration:4000}],CustomPotionColor:5020550,display:{Name:'[{"text":"Sweet stuff...dope","italic": true}]'}}},rewardExp:0b,maxUses:9999999}, {buy:{id:"honey_bottle",Count:20},buyB:{id:"magma_cream",Count:6},sell:{id:"lingering_potion",Count:1,tag:{Potion:"minecraft:water",display:{Name:'[{"text":"Henri-made nurturing stimulant","italic": true}]'},CustomPotionEffects:[{Id:1,Amplifier:40,Duration:2147483647},{Id:3,Amplifier:126,Duration:2147483647},{Id:5,Amplifier:126,Duration:2147483647},{Id:6,Amplifier:8},{Id:8,Amplifier:10,Duration:2147483647},{Id:10,Amplifier:31,Duration:2147483647},{Id:11,Amplifier:4,Duration:2147483647},{Id:12,Duration:2147483647},{Id:13,Duration:2147483647},{Id:16,Duration:2147483647},{Id:21,Amplifier:126,Duration:2147483647},{Id:22,Amplifier:126,Duration:2147483647},{Id:23,Amplifier:126},{Id:26,Amplifier:126,Duration:2147483647},{Id:30,Duration:2147483647},{Id:29,Duration:2147483647},{Id:30,Duration:2147483647}]}},rewardExp:0b,maxUses:9999999}, {buy:{id:"honey_bottle",Count:40},buyB:{id:"sugar",Count:12},sell:{id:"potion",Count:1,tag:{CustomPotionEffects:[{Id:1,Amplifier:126,Duration:1200},{Id:4,Amplifier:126,Duration:1200},{Id:17,Amplifier:126,Duration:200},{Id:7,Amplifier:2},{Id:8,Amplifier:126,Duration:1200},{Id:9,Amplifier:31,Duration:240},{Id:16,Duration:1200},{Id:27,Amplifier:126,Duration:1200},{Id:24,Amplifier:126,Duration:1200},{Id:17},{Id:25,Amplifier:20,Duration:1200},{Id:19,Amplifier:126,Duration:1200},{Id:28,Duration:4000}],CustomPotionColor:5020550,display:{Name:'[{"text":"Sweet stuff...dope","italic": true}]'}}},rewardExp:0b,maxUses:9999999}, {buy:{id:"honey_bottle",Count:40},buyB:{id:"magma_cream",Count:12},sell:{id:"potion",Count:1,tag:{Potion:"minecraft:water",display:{Name:'[{"text":"Henri-made nurturing stimulant","italic": true}]'},CustomPotionEffects:[{Id:1,Amplifier:40,Duration:2147483647},{Id:3,Amplifier:126,Duration:2147483647},{Id:5,Amplifier:126,Duration:2147483647},{Id:6,Amplifier:8},{Id:8,Amplifier:10,Duration:2147483647},{Id:10,Amplifier:31,Duration:2147483647},{Id:11,Amplifier:4,Duration:2147483647},{Id:12,Duration:2147483647},{Id:13,Duration:2147483647},{Id:16,Duration:2147483647},{Id:21,Amplifier:126,Duration:2147483647},{Id:22,Amplifier:126,Duration:2147483647},{Id:23,Amplifier:126},{Id:26,Amplifier:126,Duration:2147483647},{Id:30,Duration:2147483647},{Id:29,Duration:2147483647},{Id:30,Duration:2147483647}]}},rewardExp:0b,maxUses:9999999}]}}
execute positioned as @a[limit=1,sort=random] if data storage minecraft:henridatapack {MultipleHenris:0} run tp @e[type=villager,tag=Henri] ~ ~100 ~
execute positioned as @a[limit=1,sort=random] if data storage minecraft:henridatapack {MultipleHenris:0} run kill @e[type=villager,tag=Henri]
execute positioned as @a[limit=1,sort=random] run summon villager ~ ~20 ~10 {Tags:[Henri],VillagerData:{profession:"nitwit",level:99,type:"swamp"},Invulnerable:1,Silent:1,CustomName:'"Henri the medicin man"',ActiveEffects:[{Id:2,Amplifier:4,Duration:240},{Id:6,Amplifier:1,Duration:240},{Id:8,Amplifier:1,Duration:240},{Id:10,Amplifier:1,Duration:240},{Id:11,Amplifier:1,Duration:240},{Id:15,Amplifier:1,Duration:240},{Id:21,Amplifier:1,Duration:240},{Id:22,Amplifier:1,Duration:240},{Id:24,Amplifier:1,Duration:240},{Id:26,Amplifier:1,Duration:240},{Id:29,Amplifier:1,Duration:240},{Id:30,Amplifier:1,Duration:240},{Id:31,Amplifier:1,Duration:240}],Offers:{Recipes:[{buy:{id:"honey_bottle",Count:10},buyB:{id:"sugar",Count:3},sell:{id:"splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:1,Amplifier:126,Duration:1200},{Id:4,Amplifier:126,Duration:1200},{Id:17,Amplifier:126,Duration:200},{Id:7,Amplifier:2},{Id:8,Amplifier:126,Duration:1200},{Id:9,Amplifier:31,Duration:240},{Id:16,Duration:1200},{Id:27,Amplifier:126,Duration:1200},{Id:24,Amplifier:126,Duration:1200},{Id:17},{Id:25,Amplifier:20,Duration:1200},{Id:19,Amplifier:126,Duration:1200},{Id:28,Duration:4000}],CustomPotionColor:5020550,display:{Name:'[{"text":"Sweet stuff...dope","italic": true}]'}}},rewardExp:0b,maxUses:9999999}, {buy:{id:"honey_bottle",Count:10},buyB:{id:"magma_cream",Count:3},sell:{id:"splash_potion",Count:1,tag:{Potion:"minecraft:water",display:{Name:'[{"text":"Henri-made nurturing stimulant","italic": true}]'},CustomPotionEffects:[{Id:1,Amplifier:40,Duration:2147483647},{Id:3,Amplifier:126,Duration:2147483647},{Id:5,Amplifier:126,Duration:2147483647},{Id:6,Amplifier:8},{Id:8,Amplifier:10,Duration:2147483647},{Id:10,Amplifier:31,Duration:2147483647},{Id:11,Amplifier:4,Duration:2147483647},{Id:12,Duration:2147483647},{Id:13,Duration:2147483647},{Id:16,Duration:2147483647},{Id:21,Amplifier:126,Duration:2147483647},{Id:22,Amplifier:126,Duration:2147483647},{Id:23,Amplifier:126},{Id:26,Amplifier:126,Duration:2147483647},{Id:30,Duration:2147483647},{Id:29,Duration:2147483647},{Id:30,Duration:2147483647}]}},rewardExp:0b,maxUses:9999999}, {buy:{id:"honey_bottle",Count:20},buyB:{id:"sugar",Count:6},sell:{id:"lingering_potion",Count:1,tag:{CustomPotionEffects:[{Id:1,Amplifier:126,Duration:1200},{Id:4,Amplifier:126,Duration:1200},{Id:17,Amplifier:126,Duration:200},{Id:7,Amplifier:2},{Id:8,Amplifier:126,Duration:1200},{Id:9,Amplifier:31,Duration:240},{Id:16,Duration:1200},{Id:27,Amplifier:126,Duration:1200},{Id:24,Amplifier:126,Duration:1200},{Id:17},{Id:25,Amplifier:20,Duration:1200},{Id:19,Amplifier:126,Duration:1200},{Id:28,Duration:4000}],CustomPotionColor:5020550,display:{Name:'[{"text":"Sweet stuff...dope","italic": true}]'}}},rewardExp:0b,maxUses:9999999}, {buy:{id:"honey_bottle",Count:20},buyB:{id:"magma_cream",Count:6},sell:{id:"lingering_potion",Count:1,tag:{Potion:"minecraft:water",display:{Name:'[{"text":"Henri-made nurturing stimulant","italic": true}]'},CustomPotionEffects:[{Id:1,Amplifier:40,Duration:2147483647},{Id:3,Amplifier:126,Duration:2147483647},{Id:5,Amplifier:126,Duration:2147483647},{Id:6,Amplifier:8},{Id:8,Amplifier:10,Duration:2147483647},{Id:10,Amplifier:31,Duration:2147483647},{Id:11,Amplifier:4,Duration:2147483647},{Id:12,Duration:2147483647},{Id:13,Duration:2147483647},{Id:16,Duration:2147483647},{Id:21,Amplifier:126,Duration:2147483647},{Id:22,Amplifier:126,Duration:2147483647},{Id:23,Amplifier:126},{Id:26,Amplifier:126,Duration:2147483647},{Id:30,Duration:2147483647},{Id:29,Duration:2147483647},{Id:30,Duration:2147483647}]}},rewardExp:0b,maxUses:9999999}, {buy:{id:"honey_bottle",Count:40},buyB:{id:"sugar",Count:12},sell:{id:"potion",Count:1,tag:{CustomPotionEffects:[{Id:1,Amplifier:126,Duration:1200},{Id:4,Amplifier:126,Duration:1200},{Id:17,Amplifier:126,Duration:200},{Id:7,Amplifier:2},{Id:8,Amplifier:126,Duration:1200},{Id:9,Amplifier:31,Duration:240},{Id:16,Duration:1200},{Id:27,Amplifier:126,Duration:1200},{Id:24,Amplifier:126,Duration:1200},{Id:17},{Id:25,Amplifier:20,Duration:1200},{Id:19,Amplifier:126,Duration:1200},{Id:28,Duration:4000}],CustomPotionColor:5020550,display:{Name:'[{"text":"Sweet stuff...dope","italic": true}]'}}},rewardExp:0b,maxUses:9999999}, {buy:{id:"honey_bottle",Count:40},buyB:{id:"magma_cream",Count:12},sell:{id:"potion",Count:1,tag:{Potion:"minecraft:water",display:{Name:'[{"text":"Henri-made nurturing stimulant","italic": true}]'},CustomPotionEffects:[{Id:1,Amplifier:40,Duration:2147483647},{Id:3,Amplifier:126,Duration:2147483647},{Id:5,Amplifier:126,Duration:2147483647},{Id:6,Amplifier:8},{Id:8,Amplifier:10,Duration:2147483647},{Id:10,Amplifier:31,Duration:2147483647},{Id:11,Amplifier:4,Duration:2147483647},{Id:12,Duration:2147483647},{Id:13,Duration:2147483647},{Id:16,Duration:2147483647},{Id:21,Amplifier:126,Duration:2147483647},{Id:22,Amplifier:126,Duration:2147483647},{Id:23,Amplifier:126},{Id:26,Amplifier:126,Duration:2147483647},{Id:30,Duration:2147483647},{Id:29,Duration:2147483647},{Id:30,Duration:2147483647}]}},rewardExp:0b,maxUses:9999999}]}}
execute as @e[type=villager,tag=Henri] positioned as @s run tellraw @a[distance=..20] "Oh hi there. I have SWEEEET stuff for you to buy!"






execute unless data storage minecraft:henridatapack {autospawn:0} run function melononmain:henri_the_datapack_background/travel
execute unless data storage minecraft:henridatapack {bertthebanker:0} run function melononmain:henri_the_datapack_bert_the_banker_background/reset

# (Re)Set counters
scoreboard objectives add HenriActiveCounter dummy
scoreboard players reset @e HenriActiveCounter
scoreboard objectives add HenriActitivityTracker dummy
scoreboard objectives add catlove dummy
